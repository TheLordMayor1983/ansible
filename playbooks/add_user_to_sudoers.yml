---
- name: Add User with Password to Sudoers
  hosts: 192.168.0.94
  become: true
  vars:
    # created with:
    # python -c 'import crypt; print crypt.crypt("This is my Password", "$1$SomeSalt$")'
    password: $1$SomeSalt$3qQvRlVMNbQwLs/ap404E.

  tasks:
    #user: name=gcs_scan password={{ password }}

  - name: Add gcs_scan user and add it to sudo
    user: name=gcs_scan
          state=present
          createhome=yes
          password={{ password }}
    become_method: "sudo"

  - name: Set up authorized keys for the deployer user
    authorized_key: user=gcs_scan key="{{item}}"
    with_file:
      - /home/gcs_scan/.ssh/id_rsa.pub

